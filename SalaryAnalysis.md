108-2 大數據分析方法 作業一
================
談家旭

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
（107年）<https://data.gov.tw/dataset/6647>
（104-105年）<http://ipgod.nchc.org.tw/dataset/a17000000j-020066>
，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較104年度和107年度大學畢業者的薪資資料

### 資料匯入與處理

``` r
library(readr)
library(dplyr)
```

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

``` r
dataset1 <- read_csv("D:/jarsh/下載/104.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   `經常性薪資-薪資` = col_double(),
    ##   `經常性薪資-女/男` = col_character(),
    ##   `國中及以下-薪資` = col_character(),
    ##   `國中及以下-女/男` = col_character(),
    ##   `高中或高職-薪資` = col_character(),
    ##   `高中或高職-女/男` = col_character(),
    ##   `專科-薪資` = col_character(),
    ##   `專科-女/男` = col_character(),
    ##   `大學-薪資` = col_character(),
    ##   `大學-女/男` = col_character(),
    ##   `研究所及以上-薪資` = col_character(),
    ##   `研究所及以上-女/男` = col_character()
    ## )

``` r
dataset2 <- read_csv("D:/jarsh/下載/107年各教育程度別初任人員每人每月經常性薪資─按大職類分.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   `經常性薪資-薪資` = col_character(),
    ##   `經常性薪資-女/男` = col_character(),
    ##   `國中及以下-薪資` = col_character(),
    ##   `國中及以下-女/男` = col_character(),
    ##   `高中或高職-薪資` = col_character(),
    ##   `高中或高職-女/男` = col_character(),
    ##   `專科-薪資` = col_character(),
    ##   `專科-女/男` = col_character(),
    ##   `大學-薪資` = col_character(),
    ##   `大學-女/男` = col_character(),
    ##   `研究所-薪資` = col_character(),
    ##   `研究所-女/男` = col_character()
    ## )

``` r
dataset1$大職業別<-gsub("部門|、","",dataset1$大職業別)
dataset2$大職業別<-gsub("_","",dataset2$大職業別)
dataset2$大職業別<-gsub("建工程","造業",dataset2$大職業別)
dataset2$大職業別<-gsub("出版、影音製作、傳播及資通訊服務業","資訊及通訊傳播業",dataset2$大職業別)
dataset2$大職業別<-gsub("教育業","教育服務業",dataset2$大職業別)
dataset2$大職業別<-gsub("醫療保健業","醫療保健服務業",dataset2$大職業別)

for(i in 1:140){
  if (dataset2$大職業別[i] != dataset1$大職業別[i]){
    print(dataset1$大職業別[i])
    print(dataset2$大職業別[i])
  }
}

dataset2$`大學-薪資`<-as.numeric(gsub("—|…",NA,dataset2$`大學-薪資`))
dataset1$`大學-薪資`<-as.numeric(gsub("—|…",NA,dataset1$`大學-薪資`))
```

### 107年度薪資較104年度薪資高的職業有哪些?

``` r
salary <- data.frame(profession=dataset1$大職業別)
salary$s<-dataset2$`大學-薪資`/dataset1$`大學-薪資`

salary<-salary[complete.cases(salary$s),]
salary$s<-sort(salary$s,decreasing = T)
knitr::kable(head(salary,9))
```

|    | profession           |        s |
| -- | :------------------- | -------: |
| 1  | 工業及服務業               | 1.158908 |
| 2  | 工業及服務業-專業人員          | 1.132338 |
| 3  | 工業及服務業-技術員及助理專業人員    | 1.130807 |
| 4  | 工業及服務業-事務支援人員        | 1.108842 |
| 5  | 工業及服務業-服務及銷售工作人員     | 1.097632 |
| 6  | 工業及服務業-技藝機械設備操作及組裝人員 | 1.097194 |
| 8  | 工業                   | 1.096177 |
| 9  | 工業-專業人員              | 1.095800 |
| 10 | 工業-技術員及助理專業人員        | 1.086330 |

107薪資較104薪資高的前十筆都屬於工業類的職業，看得出這些職業的成長筆機會很高，尤其是加上服務業的工業前六名都是他，工業及服務業和工業職業類別比細分下去的職業高，可能是類別有包含無法細分的資料特殊個體，所以才能高於細分下去的職業。

### 提高超過5%的職業有哪些?

``` r
knitr::kable(filter(salary,s>1.05))
```

| profession               |        s |
| :----------------------- | -------: |
| 工業及服務業                   | 1.158908 |
| 工業及服務業-專業人員              | 1.132338 |
| 工業及服務業-技術員及助理專業人員        | 1.130807 |
| 工業及服務業-事務支援人員            | 1.108842 |
| 工業及服務業-服務及銷售工作人員         | 1.097632 |
| 工業及服務業-技藝機械設備操作及組裝人員     | 1.097194 |
| 工業                       | 1.096177 |
| 工業-專業人員                  | 1.095800 |
| 工業-技術員及助理專業人員            | 1.086330 |
| 工業-事務支援人員                | 1.086267 |
| 工業-服務及銷售工作人員             | 1.082141 |
| 工業-技藝機械設備操作及組裝人員         | 1.081297 |
| 礦業及土石採取業                 | 1.072507 |
| 礦業及土石採取業-專業人員            | 1.071877 |
| 礦業及土石採取業-技術員及助理專業人員      | 1.071044 |
| 礦業及土石採取業-事務支援人員          | 1.070685 |
| 礦業及土石採取業-技藝機械設備操作及組裝人員   | 1.070003 |
| 製造業                      | 1.069120 |
| 製造業-專業人員                 | 1.069093 |
| 製造業-技術員及助理專業人員           | 1.068089 |
| 製造業-事務支援人員               | 1.067475 |
| 製造業-服務及銷售工作人員            | 1.066587 |
| 製造業-技藝機械設備操作及組裝人員        | 1.066421 |
| 電力及燃氣供應業                 | 1.065723 |
| 電力及燃氣供應業-專業人員            | 1.063403 |
| 電力及燃氣供應業-技術員及助理專業人員      | 1.062300 |
| 電力及燃氣供應業-事務支援人員          | 1.062117 |
| 電力及燃氣供應業-服務及銷售工作人員       | 1.060903 |
| 電力及燃氣供應業-技藝機械設備操作及組裝人員   | 1.060715 |
| 用水供應及污染整治業               | 1.060594 |
| 用水供應及污染整治業-專業人員          | 1.060240 |
| 用水供應及污染整治業-技術員及助理專業人員    | 1.059809 |
| 用水供應及污染整治業-事務支援人員        | 1.057476 |
| 用水供應及污染整治業-服務及銷售工作人員     | 1.056991 |
| 用水供應及污染整治業-技藝機械設備操作及組裝人員 | 1.056960 |
| 營造業                      | 1.056577 |
| 營造業-專業人員                 | 1.056260 |
| 營造業-技術員及助理專業人員           | 1.055985 |
| 營造業-事務支援人員               | 1.055015 |
| 營造業-服務及銷售工作人員            | 1.054221 |
| 營造業-技藝機械設備操作及組裝人員        | 1.053951 |
| 服務業                      | 1.053411 |
| 服務業-專業人員                 | 1.053410 |
| 服務業-技術員及助理專業人員           | 1.052928 |
| 服務業-事務支援人員               | 1.052818 |
| 服務業-服務及銷售工作人員            | 1.052507 |
| 服務業-技藝機械設備操作及組裝人員        | 1.052499 |
| 批發及零售業                   | 1.052421 |
| 批發及零售業-專業人員              | 1.052347 |
| 批發及零售業-技術員及助理專業人員        | 1.051960 |
| 批發及零售業-事務支援人員            | 1.051427 |
| 批發及零售業-服務及銷售工作人員         | 1.050670 |
| 批發及零售業-技藝機械設備操作及組裝人員     | 1.050328 |

總共有53筆職業107-104薪資成長超過5%，專業人員、技術員及助理專業人員、事務支援人員、服務及銷售工作人員、技藝機械設備操作及組裝人員此五種細分作業，而薪水調漲順序也是上述排序，可看出專業人員、技術員及助理專業人員的潛力，可推論出越能有唯一性、創新性是調薪的原因。

### 主要的職業種別是哪些種類呢?

``` r
salary$profession<-as.character(salary$profession)

for(i in 1:117){
  salary$pp[i]<-strsplit(salary$profession,"-")[[i]][1]
}
names(table(as.character(salary$pp)))
```

    ##  [1] "工業"                 "工業及服務業"         "不動產業"            
    ##  [4] "支援服務業"           "用水供應及污染整治業" "住宿及餐飲業"        
    ##  [7] "批發及零售業"         "其他服務業"           "服務業"              
    ## [10] "金融及保險業"         "專業科學及技術服務業" "教育服務業"          
    ## [13] "資訊及通訊傳播業"     "運輸及倉儲業"         "電力及燃氣供應業"    
    ## [16] "製造業"               "營造業"               "醫療保健服務業"      
    ## [19] "藝術娛樂及休閒服務業" "礦業及土石採取業"

``` r
a<-filter(salary,s>1.05)
knitr::kable(table(as.character(a$pp)))
```

| Var1       | Freq |
| :--------- | ---: |
| 工業         |    6 |
| 工業及服務業     |    6 |
| 用水供應及污染整治業 |    6 |
| 批發及零售業     |    6 |
| 服務業        |    6 |
| 電力及燃氣供應業   |    6 |
| 製造業        |    6 |
| 營造業        |    6 |
| 礦業及土石採取業   |    5 |

總共職業分為20類，超過5%的職業種類分成9種，服務業、工業、礦業、製造業提升可能是最低薪資提升，而醫療保健服務業之所以沒提昇可能是原本就比最低薪資高，但因物價的上漲，薪資的調漲如果沒跟上這可能是另類的降薪。

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為103到106年度的大學畢業薪資。

### 104和107年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

``` r
dataset1$`大學-女/男`<-as.numeric(gsub("—|…",NA,dataset1$`大學-女/男`))
a<-dataset1[complete.cases(dataset1$`大學-女/男`),]
a$`大學-女/男`<-sort(a$`大學-女/男`,decreasing = T)
a<-select(a,大職業別,`大學-女/男`)
dataset2$`大學-女/男`<-as.numeric(gsub("—|…",NA,dataset2$`大學-女/男`))
b<-dataset2[complete.cases(dataset2$`大學-女/男`),]
b$`大學-女/男`<-sort(b$`大學-女/男`,decreasing = T)
b<-select(b,大職業別,`大學-女/男`)
a$`大學-女/男`<-as.character(a$`大學-女/男`)
b$`大學-女/男`<-as.character(b$`大學-女/男`)
knitr::kable(tail(a,10))
```

| 大職業別                     | 大學-女/男 |
| :----------------------- | :----- |
| 藝術娛樂及休閒服務業-技術員及助理專業人員    | 96.44  |
| 藝術娛樂及休閒服務業-事務支援人員        | 96.35  |
| 藝術娛樂及休閒服務業-服務及銷售工作人員     | 95.9   |
| 藝術娛樂及休閒服務業-技藝機械設備操作及組裝人員 | 95.64  |
| 其他服務業                    | 95.47  |
| 其他服務業-專業人員               | 95.28  |
| 其他服務業-技術員及助理專業人員         | 93.1   |
| 其他服務業-事務支援人員             | 92.42  |
| 其他服務業-服務及銷售工作人員          | 91.9   |
| 其他服務業-技藝機械設備操作及組裝人員      | 91.69  |

``` r
knitr::kable(tail(b,10))
```

| 大職業別                     | 大學-女/男 |
| :----------------------- | :----- |
| 藝術娛樂及休閒服務業-技術員及助理專業人員    | 98.23  |
| 藝術娛樂及休閒服務業-事務支援人員        | 97.94  |
| 藝術娛樂及休閒服務業-服務及銷售工作人員     | 97.81  |
| 藝術娛樂及休閒服務業-技藝機械設備操作及組裝人員 | 97.78  |
| 其他服務業                    | 97.73  |
| 其他服務業-專業人員               | 97.61  |
| 其他服務業-技術員及助理專業人員         | 97.52  |
| 其他服務業-事務支援人員             | 97.11  |
| 其他服務業-服務及銷售工作人員          | 96.96  |
| 其他服務業-技藝機械設備操作及組裝人員      | 96.02  |

104(a)年就有111筆資料顯示男性的薪資大於女性，107(b)年則是109筆資料顯示男性的薪資大於女性，不過差別薪水的個數或和性別比的差距有明顯的提升，但還是可以看出就職這些職位的女性還是在全部職位中倒數，所以可得知不是此職業特別需要男性的特性須給出較高薪水吸引男性踏入此行就是此職業較不重視女性，不過也有可能是此職位的男性個體都因較高成就領高薪沒被拉低。

### 哪些行業女生薪資比男生薪資多?

``` r
knitr::kable(head(a,10))
```

| 大職業別                 | 大學-女/男 |
| :------------------- | :----- |
| 工業及服務業               | 100.26 |
| 工業及服務業-專業人員          | 100    |
| 工業及服務業-技術員及助理專業人員    | 100    |
| 工業及服務業-事務支援人員        | 100    |
| 工業及服務業-服務及銷售工作人員     | 100    |
| 工業及服務業-技藝機械設備操作及組裝人員 | 99.93  |
| 工業                   | 99.92  |
| 工業-專業人員              | 99.9   |
| 工業-技術員及助理專業人員        | 99.78  |
| 工業-事務支援人員            | 99.76  |

``` r
knitr::kable(head(b,10))
```

| 大職業別                 | 大學-女/男 |
| :------------------- | :----- |
| 工業及服務業               | 100    |
| 工業及服務業-專業人員          | 100    |
| 工業及服務業-技術員及助理專業人員    | 100    |
| 工業及服務業-事務支援人員        | 100    |
| 工業及服務業-服務及銷售工作人員     | 100    |
| 工業及服務業-技藝機械設備操作及組裝人員 | 100    |
| 工業                   | 100    |
| 工業-專業人員              | 100    |
| 工業-技術員及助理專業人員        | 99.98  |
| 工業-事務支援人員            | 99.96  |

104(a)只有一筆大於100，為100.26，其他四筆只是剛好等於100；107(b)則是8筆資料等於100，但沒有大於100的個數，這可能才是落實真正的性別平等，可看出工業及服務業和工業薪水較無落差，可能是在此職位不看重性別，而是能力，據我所知技術人員的薪水相差甚多，性別比高好等於100，不免覺得不是一起高低，就是某一性別是為M型薪水分布。

## 研究所薪資差異

以107年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
dataset2$`研究所-薪資`<-as.numeric(gsub("—|…",NA,dataset2$`研究所-薪資`))
dataset2$`大學-薪資`<-as.numeric(gsub("—|…",NA,dataset2$`大學-薪資`))
difference <- data.frame(name = dataset2$大職業別)
difference$d<-dataset2$`研究所-薪資`/dataset2$`大學-薪資`
difference<-difference[complete.cases(difference$d),]
difference$d<- sort(difference$d,decreasing = T)

knitr::kable(head(difference,10))
```

|    | name              |        d |
| -- | :---------------- | -------: |
| 1  | 工業及服務業            | 1.237694 |
| 2  | 工業及服務業-專業人員       | 1.205362 |
| 3  | 工業及服務業-技術員及助理專業人員 | 1.204652 |
| 4  | 工業及服務業-事務支援人員     | 1.189864 |
| 8  | 工業                | 1.183921 |
| 9  | 工業-專業人員           | 1.180548 |
| 10 | 工業-技術員及助理專業人員     | 1.179958 |
| 11 | 工業-事務支援人員         | 1.178580 |
| 15 | 礦業及土石採取業          | 1.174801 |
| 16 | 礦業及土石採取業-專業人員     | 1.174391 |

``` r
knitr::kable(head(difference,10)[1])
```

|    | name              |
| -- | :---------------- |
| 1  | 工業及服務業            |
| 2  | 工業及服務業-專業人員       |
| 3  | 工業及服務業-技術員及助理專業人員 |
| 4  | 工業及服務業-事務支援人員     |
| 8  | 工業                |
| 9  | 工業-專業人員           |
| 10 | 工業-技術員及助理專業人員     |
| 11 | 工業-事務支援人員         |
| 15 | 礦業及土石採取業          |
| 16 | 礦業及土石採取業-專業人員     |

這十筆資料有8筆都被工業和工業及服務業包辦了，可得知研究所選擇工業相關的學系，在薪資方面有明顯差異。

## 我有興趣的職業別薪資狀況分析

### 有興趣的職業別篩選，呈現薪資

``` r
differenceCC <- data.frame(name = dataset2$大職業別,
                           研究所 =dataset2$`研究所-薪資`,
                           大學 = dataset2$`大學-薪資`)
differenceCC<-differenceCC[complete.cases(differenceCC$研究所&differenceCC$大學),]
differenceCC$研究所<-sort(differenceCC$研究所,decreasing = T)
knitr::kable(head(differenceCC[grep("工業及服務業-專業人員|資訊及通訊傳播業",differenceCC$name),],10))
```

|    | name                |  研究所  |  大學   |
| -- | :------------------ | :---: | :---: |
| 2  | 工業及服務業-專業人員         | 39866 | 32317 |
| 78 | 資訊及通訊傳播業            | 32206 | 29143 |
| 79 | 資訊及通訊傳播業-專業人員       | 32201 | 31763 |
| 80 | 資訊及通訊傳播業-技術員及助理專業人員 | 32103 | 28910 |
| 81 | 資訊及通訊傳播業-事務支援人員     | 32049 | 27464 |

挑選出5筆我有興趣的職業，從第一行得編碼可得知除了工業及服務業-專業人員，其他職位都位於中後半，雖然高於22k，但此原始資料的大學薪資最低25K，所以除了工業及服務業-專業人員的職位不只爆肝還沒錢，不知是不是責任制所以不會有加班費這種福利，研究所雖有超過3萬，但資料互比後，心中有點不甘。

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
knitr::kable(difference[grep("工業及服務業-專業人員|資訊及通訊傳播業",difference$name),])
```

|    | name                |        d |
| -- | :------------------ | -------: |
| 2  | 工業及服務業-專業人員         | 1.205362 |
| 78 | 資訊及通訊傳播業            | 1.125168 |
| 79 | 資訊及通訊傳播業-專業人員       | 1.123359 |
| 80 | 資訊及通訊傳播業-技術員及助理專業人員 | 1.122981 |
| 81 | 資訊及通訊傳播業-事務支援人員     | 1.121453 |

差蠻多的，相比之下，相差1%，先不論升遷的調薪，工業及服務業-專業人員的研究所可相差七千多，而資訊及通訊傳播業只能相差一千到四千，甚至還低於工業及服務業-專業人員的大學薪資，看來如果真要選擇資訊類的，應該直接投入社會工作，利用閒暇時間研讀，提升硬實力，用實力選擇薪資。
